{% extends 'voter_analytics/base.html' %}
{% load custom_filters %}

{% block content %}
<div class="container">
  <div class="row">
      {% include 'voter_analytics/search.html' %}
  </div>

  <h1>Voter List</h1>
  <div class="row">
      <table>
          <tr>
              <th>Name</th>
              <th>Street Address</th>
              <th>Date of Birth</th>
              <th>Party Affiliation</th>
              <th>Voter Score</th>
          </tr>
  
          {% for voter in voters %}
          <tr>
              <td>
                  <a href="{% url 'voter' voter.pk %}">
                  {{ voter.first_name }} {{ voter.last_name }}
                  </a>
              </td>
              <td>{{ voter.street_number }} {{ voter.street_name }} {% if voter.apartment_number %}Apt {{ voter.apartment_number }}{% endif %}</td>
              <td>{{ voter.date_of_birth }}</td>
              <td>{{ voter.party_affiliation }}</td>
              <td>{{ voter.voter_score }}</td>
          </tr>
          {% endfor %}
      </table>
  </div>

  <!-- pagination -->
  <div class="row">
      {% if is_paginated %}
      <ul class="pagination">
          {% if page_obj.has_previous %}
              <li>
                  <a href="?page={{ page_obj.previous_page_number }}&{{ get_copy.urlencode }}">Previous</a>
              </li>
          {% endif %}
              <li>
                  Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.
              </li>
          {% if page_obj.has_next %}
              <li>
                  <a href="?page={{ page_obj.next_page_number }}&{{ get_copy.urlencode }}">Next</a>
              </li>
          {% endif %}
      </ul>
      {% endif %}
  </div>
</div>
{% endblock %}

