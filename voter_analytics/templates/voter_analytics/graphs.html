{% extends 'voter_analytics/base.html' %}
{% load custom_filters %}


{% block content %}
<h2>Voter Data Visualizations</h2>
<div class="container">
<form action="{% url 'graphs' %}" method="get" class="search-form">
    <table>
      <tr>
        <th>Party Affiliation</th>
        <td>
          <select name="party_affiliation">
            <option value="">--Select Party--</option>
            <option value="D">Democratic</option>
            <option value="R">Republican</option>
            <option value="CC">Constitution Party</option>
            <option value="L">Libertarian Party</option>
            <option value="T">Tea Party</option>
            <option value="O">Other</option>
            <option value="G">Green Party</option>
            <option value="J">Independent Party</option>
            <option value="Q">Reform Party</option>
            <option value="FF">Freedom Party</option>
          </select>
        </td>
      </tr>
  
      <tr>
        <th>Minimum Date of Birth</th>
        <td>
          <select name="min_dob">
            <option value="">--Select Year--</option>
            {% for year in 1900|custom_range:2023 %}
              <option value="{{ year }}">{{ year }}</option>
            {% endfor %}
          </select>
        </td>
      </tr>
  
      <tr>
        <th>Maximum Date of Birth</th>
        <td>
          <select name="max_dob">
            <option value="">--Select Year--</option>
            {% for year in 1900|custom_range:2023 %}
              <option value="{{ year }}">{{ year }}</option>
            {% endfor %}
          </select>
        </td>
      </tr>
  
      <tr>
        <th>Voter Score</th>
        <td>
          <select name="voter_score">
            <option value="">--Select Score--</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
          </select>
        </td>
      </tr>
  
      <tr>
        <th>Election Voting</th>
        <td>
          <label><input type="checkbox" name="v20state" value="1"> Voted in 2020 State</label><br>
          <label><input type="checkbox" name="v21town" value="1"> Voted in 2021 Town</label><br>
          <label><input type="checkbox" name="v21primary" value="1"> Voted in 2021 Primary</label><br>
          <label><input type="checkbox" name="v22general" value="1"> Voted in 2022 General</label><br>
          <label><input type="checkbox" name="v23town" value="1"> Voted in 2023 Town</label><br>
        </td>
      </tr>
  
      <tr>
        <td></td>
        <td><input type="submit" value="Search"></td>
      </tr>
    </table>
  </form>
  
  

<h3>Voters by Year of Birth</h3>
<div>
  {{ bar_div|safe }}
</div>

<h3>Voters by Party Affiliation</h3>
<div>
  {{ pie_div|safe }}
</div>

<h3>Voters by Election Participation</h3>
<div>
  {{ election_bar_div|safe }}
</div>
</div>
{% endblock %}